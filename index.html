<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link rel="stylesheet" href="bootstrap-4.4.0-dist\css\bootstrap.css">

    <style>
        .input-tables td {
            vertical-align: top;
        }

        .error {
            color: red;
        }
    </style>
</head>

<body>
    <div class="container-fluid mb-4">
        <div class="row">
            <div class="col-sm-12">
                <h1>Template-Replacer</h1>
                <p>Simple regex split / replace, with handlebar template support</p>
                <p><a href="https://github.com/vicksonzero/template-replacer">Fork me at Github!!</a></p>
                <p>Made with ‚ù§ by <a href="https://dickson.md">Dickson</a></p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-sm-12">
                <h5>data-input</h5>
                <textarea name="data-input" id="data-input" style="width:100%; height: 200px;"></textarea>
            </div>
            <div class="col-md-4 col-sm-12">
                <h5>data-format</h5>
                <pre id="data-format-error" class="error"></pre>
                <textarea name="data-format" id="data-format" style="width:100%; height: 200px;"></textarea>
            </div>
            <div class="col-md-2 col-sm-12">
                <h5>data-aliases</h5>
                <textarea name="data-aliases" id="data-aliases" style="width:100%; height: 200px;"></textarea>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <button id="split-input">Split Input by Regex</button>
            </div>
        </div>
    </div>
    <div class="container-fluid mb-4">
        <div class="row">
            <div class="col-md-8 col-sm-12">
                <h5>data <span id="data-count-label"></span></h5>
                <textarea name="data" id="data" style="width:100%; height: 200px;"></textarea>
            </div>
            <div class="col-md-4 col-sm-12">
                <h5>data-residue</h5>
                <pre id="data-format-error" class="error"></pre>
                <textarea name="data-residue" id="data-residue" style="width:100%; height: 200px;"></textarea>
            </div>
        </div>
    </div>
    <div class="container-fluid mb-4">
        <div class="row">
            <div class="col-md-8 col-sm-12">
                <h5>template-input</h5>
                <pre id="template-input-error" class="error"></pre>
                <!-- <textarea name="template-input" id="template-input" cols="60" rows="7"></textarea> -->
                <div id="template-input-b" style="width:100%; height: 400px; border: solid 1px #CCC"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <label for="iterate-by-js">Iterate by Array#map()</label>
                <input type="checkbox" name="iterate-by-js" id="iterate-by-js">
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <button id="apply-template">Apply Template</button>
                <button id="preview-html">Preview HTML</button>
            </div>
        </div>
    </div>
    <div class="container-fluid mb-4">
        <div class="row">
            <div class="col-md-8 col-sm-12">
                <h5>output</h5>
                <!-- <textarea name="template-input" id="template-input" cols="60" rows="7"></textarea> -->
                <textarea name="output" id="output" style="width:100%; height: 200px;"></textarea>
            </div>
        </div>
    </div>

    <div id="preview-box">
    </div>


    <!-- <script type = "text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.js"></script> -->

    <script src="handlebars.web-v4.1.0.js"></script>

    <script src="monaco-editor/min/vs/loader.js"></script>
    <script>
        require.config({ paths: { 'vs': 'monaco-editor/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            var editor = monaco.editor.create(document.getElementById('template-input-b'), {
                value: '<table>\n' +
                    '{{#each this}}\n' +
                    '<tr style="font-size:{{math size "/" 2}}px;">\n' +
                    '    <td>{{@index}}</td>\n' +
                    '    <td>{{name}}</td>\n' +
                    '    <td>{{description}}</td>\n' +
                    '</tr>\n' +
                    '{{/each}}\n' +
                    '</table>',
                language: 'handlebars'
            });
            window.onresize = () => {
                editor.layout();
            }
            window.templateInputB = editor;
        });
    </script>

    <script src="script.js"></script>
</body>

</html>